datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Payment {
  id            String      @id @default(uuid())
  transactionId String
  amount        Float
  paymentType   PaymentType
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  cashPayment   CashPayment?
  cardPayment   CardPayment?
}

model CashPayment {
  id        String  @id @default(uuid())
  paymentId String  @unique
  amount    Float

  payment   Payment @relation(fields: [paymentId], references: [id])
}

model CardPayment {
  id             String   @id @default(uuid())
  paymentId      String   @unique
  amount         Float
  accountNumber  String
  bank           String
  edcMachine     String
  cardType       CardType
  cardBrand      String

  payment        Payment  @relation(fields: [paymentId], references: [id])
}

enum PaymentType {
  CASH
  DEBIT
  CREDIT
}

enum CardType {
  DEBIT
  CREDIT
}